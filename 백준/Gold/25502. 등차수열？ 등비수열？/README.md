# [Gold IV] 등차수열? 등비수열? - 25502 

[문제 링크](https://www.acmicpc.net/problem/25502) 

### 성능 요약

메모리: 74968 KB, 시간: 1760 ms

### 분류

자료 구조, 수학, 트리를 사용한 집합과 맵

### 문제 설명

<p>길이 $N$인 수열 $A$이 있다. 당신은 이 수열에 총 $M$번의 연산을 수행할 것이다.</p>

<p>하나의 연산은 두 정수 $i$와 $x$로 나타난다. 이 연산은 $A$의 $i$번째 원소를 $x$로 바꾼다는 뜻이다.</p>

<p>각각의 연산을 차례로 수행한 이후 $A$가 양의 등차수열인지, 양의 등비수열인지 혹은 둘 다 아닌지 판별해보자.</p>

<ul>
	<li>등차수열이란 $2 \le i \le N$인 모든 $i$에 대해 $A_{i}-A_{i-1}$이 일정한 수열을 말한다.</li>
	<li>등비수열이란 $2 \le i \le N$인 모든 $i$에 대해 $\frac{A_{i}}{A_{i-1}}$가 일정한 수열을 말한다.</li>
	<li>양의 등차수열이란 $A_{i}-A_{i-1}$이 양의 정수인 등차수열을 말한다.</li>
	<li>양의 등비수열이란 $\frac{A_{i}}{A_{i-1}}$가 양의 정수인 등비수열을 말한다.</li>
</ul>

### 입력 

 <p>첫째 줄에 수열의 길이 $N$과 연산의 개수 $M$이 주어진다. $(3 \leq N \leq 300\,000, 1 \leq M \leq 300\,000)$</p>

<p>둘째 줄에 수열 $A$의 원소가 차례로 주어진다. $(1 \leq A_i \leq 10^{18})$</p>

<p>셋째 줄부터 $M$개의 줄에 연산 $i$ $x$가 한 줄에 하나씩 주어진다. $(1 \leq i \leq N, 1 \leq x \leq 10^{18})$</p>

### 출력 

 <p>각각의 연산을 수행한 이후 $A$가 양의 등차수열이면 <code>+</code>를, 양의 등비수열이면 <code>*</code>를, 둘 다 아닌 경우 <code>?</code>를 한 줄에 하나씩 출력한다.</p>

